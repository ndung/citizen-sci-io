<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{fragments/layoutx :: layout (~{::body},'index')}">
<body>
<div class="kt-container-fluid px-0">
    <div class="grid gap-5 lg:gap-7.5">
        <div class="kt-card">
            <div class="kt-card-header flex items-center justify-between">
                <h3 class="kt-card-title">Text Questions</h3>
            </div>

            <div class="kt-card-content">
                <link rel="stylesheet" th:href="@{https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css}" />

                <div class="table-responsive">
                    <table id="questionsTable" class="display table w-full min-w-[1000px]">
                        <thead>
                        <tr class="whitespace-nowrap">
                            <th>Seq</th><th>Attribute name</th><th>Question</th>
                            <th>Type</th><th>Enabled</th><th>Required</th><th>Section</th>
                            <th style="width:160px">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="q : ${questions}" class="whitespace-nowrap">
                            <td th:text="${q.sequence}">1</td>
                            <td th:text="${q.attribute}">attr</td>
                            <td th:text="${q.question}">Question?</td>
                            <td th:text="${q.type}">1</td>
                            <td th:text="${q.enabled}">true</td>
                            <td th:text="${q.required}">true</td>
                            <td th:text="${q.section != null ? q.section.name : '-'}">Section</td>
                            <td class="flex gap-2">
                                <a th:href="@{|/admin/questions/${q.id}/edit|}" class="kt-btn kt-btn-light">Edit</a>
                                <form th:action="@{|/admin/questions/${q.id}/delete|}" method="post"
                                      onsubmit="return confirm('Delete?');">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                    <button class="kt-btn kt-btn-danger">Del</button>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <script th:src="@{https://code.jquery.com/jquery-3.7.1.min.js}"></script>
            <script th:src="@{https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js}"></script>
            <script>
                $(function () {
                    $('#questionsTable').DataTable({
                        scrollX: true,        // enable horizontal scrolling
                        autoWidth: false,     // keep your widths; donâ€™t auto-expand
                        columnDefs: [
                            { targets: '_all', className: 'whitespace-nowrap' }
                        ]
                    });
                });
            </script>
        </div>
    </div>
</div>
</body>
</html>
